#!/bin/bash

YALLA_VERSION=0.1

# Preserve original arguments with quotes
# @see : https://stackoverflow.com/questions/3755772/how-to-preserve-double-quotes-in-in-a-shell-script/26733366#26733366
args_list(){
    argList=""
    #iterate on each argument
    for arg in "$@"
    do
      #if an argument contains a white space, enclose it in double quotes and append to the list
      #otherwise simply append the argument to the list
      if echo $arg | grep -q " "; then
       argList="$argList \"$arg\""
      else
       argList="$argList $arg"
      fi
    done

    #remove a possible trailing space at the beginning of the list
    argList=$(echo $argList | sed 's/^ *//')

    echo "$argList"
}

declare -x -f args_list;

## Set Variables

export WORKING_DIR=$(pwd)

CMD=$1

shift
ARGS=$@

case "$CMD" in
    create-project)
        git clone -b skeleton-rework --single-branch git@bitbucket.org:buzzaka/project-skeleton.git yalla && ./yalla/create-project
        ;;

    docker | ssh | mysql | app )
        echo "@todo $(args_list "$@")"
        ;;
    -v | --version)
        echo 'yalla version ' ${YALLA_VERSION}
        echo 'yalla path ' $(which yalla)
        ;;
    -h | --help)
        echo "@todo"
        ;;
    self-update)
        echo "@todo"
        ;;
    update)
        echo "@todo"
        ;;

     *)
        echo "${CMD} is not a registered command"
        exit 1
esac
